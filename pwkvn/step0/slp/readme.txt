
Start with version 16: ../../orig/pwk1-7VN_ansi_16.txt
python ../cp1252_utf8.py ../../orig/pwk1-7VN_ansi_16.txt temp_pwkvn_16.txt


========================================================================
headword structure.  Each <p> starts with a devanagari headword, but
sometimes preceded by homonym number(s). 4 forms:
21670 <p>{#X#}   
  884 <p>N. {#X#}  (N a digit)
    5 <p>N. M. {#X#}  (N a digit, and M a digit)
    1 <p>3. und 4. {#X#}
    9 <H>...
22569 (+ 21670 884 5 1 9)  all lines

========================================================================
Volume 7:
(An Arabic numeral indicates the volume in which the added word is found,
a preceding Roman numeral indicates that the word is also in the main part of the work.)

9352 vol1-6 <p> lines
2872 ^<p>[0-9. ]*{#[^#]*#} [mfn]\.
  48 ^<p>[0-9. ]*{#[^#]*#}, [mfn]\.
3194 ^<p>[0-9. ]*{#[^#]*#} Adj\.
 276 ^<p>[0-9. ]*{#[^#]*#} Adv\.
  65 ^<p>[0-9. ]*{#[^#]*#} Absol\.
  36 ^<p>[0-9. ]*{#[^#]*#}, Nom\. abstr\.
  48 ^<p>[0-9. ]*{#[^#]*#} Nom\.
  15 ^<p>[0-9. ]*{#[^#]*#} N\.
   1 ^<p>[0-9. ]*{#[^#]*#} Acc\. Inf\.
   8 ^<p>[0-9. ]*{#[^#]*#} Dat\. Inf\.
 196 ^<p>[0-9. ]*{#[^#]*#} mit
  12 ^<p>[0-9. ]*{#[^#]*#} Titel
?103 ^<p>[0-9. ]*{#[^#]*#}, lies
 299 ^<p>[0-9. ]*{#[^#]*#} <ls>
 162 ^<p>[0-9. ]*{#[^#]*#} {%
 773 ^<p>[0-9. ]*{#[^#]*#} [1-9])
 280 ^<p>[0-9. ]*{#[^#]*#} auch
  40 ^<p>[0-9. ]*{#[^#]*#}\.
  64 ^<p>[0-9. ]*{#[^#]*#} und {#[^#]*#}
   1 ^<p>[0-9. ]*{#[^#]*#} u\. {#[^#]*#}
  17 ^<p>[0-9. ]*{#[^#]*#} oder {#[^#]*#}
  22 ^<p>[0-9. ]*{#[^#]*#} [s]\.
   4 ^<p>[0-9. ]*{#[^#]*#}, [s]\.
  28 ^<p>[0-9. ]*{#[^#]*#} [Z]\.
   5 ^<p>[0-9. ]*{#[^#]*#}, [ZS]\.
 235 ^<p>[0-9. ]*{#[^#]*#} (
  30 ^<p>[0-9. ]*{#[^#]*#} in
  15 ^<p>[0-9. ]*{#[^#]*#},? wohl
 119 ^<p>[0-9. ]*{#[^#]*#},? so
  27 ^<p>[0-9. ]*{#[^#]*#},? zu
  10 ^<p>[0-9. ]*{#[^#]*#},? \(S[.]\|Gen[.]\|Nom[.]\)
  38 ^<p>[0-9. ]*{#[^#]*#},? vgl\.
  28 ^<p>[0-9. ]*{#[^#]*#},? \(Abl[.]\|Partic[.]\|Dat[.]\|Interj[.]\|Loc[.]\)
  14 ^<p>[0-9. ]*{#[^#]*#},? ist
  24 ^<p>[0-9. ]*{#[^#]*#},? \(Caus[.]\|Comm[.]\|Pl[.]\|Du[.]\|Bez[.]\)
  13 ^<p>[0-9. ]*{#[^#]*#},? \(Desid[.]\|Compar[.]\|Instr[.]\|Acc[.]\|Voc[.]\)
  40 ^<p>[0-9. ]*{#[^#]*#},? \(vor\|im\|nach\|auch\|eher\)
  34 ^<p>[0-9. ]*{#[^#]*#},? \(als\|die\|bei\|=\|am\)
  32 ^<p>[0-9. ]*{#[^#]*#},? \(Nachtr[.]\|<ls>\|Perf[.]\|das\|bedeutet\)
   8 ^<p>[0-9. ]*{#[^#]*#}[.,]? \(gedr[.]\|richtig\|ist\|=\|u[.]\)
  13 ^<p>[0-9. ]*{#[^#]*#}[.,]? \(der\|Accent\|vgl[.]\|=\|Sg[.]\|st[.]\)
  12 ^<p>[0-9. ]*{#[^#]*#}[.,]? \(adj[.]\|streiche\|v[.] l[.]\|von\|Partikel\)
   8 ^<p>[0-9. ]*{#[^#]*#},? \(etwa\|H[.]\|andere\)
  42 ^<p>[0-9. ]*{#[^#]*#}[.,]? [a-z]+[ ]
  13 ^<p>[0-9. ]*{#[^#]*#}[.,]? [0-9]+)
   5 ^<p>[0-9. ]*{#[^#]*#}[.,]? [*]
   3 ^<p>[0-9. ]*{#[^#]*#},? \(füge\|führt\)
  12 ^<p>[0-9. ]*{#[^#]*#}[.,]? [a-zA-Züö]+[ .,]
   9  See list
<p>{#aGghri#} 5. = {#pada#} {%Fach, Feld%} <ls>AGNI-P.</ls> 40, 14. 17. 
<p>{#*aJjanika#} {|gan2a|} {#purohitAdi#}. [Page1-284-b] 
<p>{#a£yupita#}. [Page1-293-c] 
<p>{#AkRtiloSTa#} ? <ls>VAITA1N.</ls> 
<p>{#jagadvallabha, jagannAthatarkapaJcAnana, ºnnAthamAhAtmya#} ²n., {#ºnnAthIya#} n., {#jaTAdarpaNa#} m., {#ºmUla#} n., {#jaTAmaNi#} m. ²und {#ºzikSA#} f. Titel von Werken ebend. 
<p>{#badakasAna#} {|Badachs2a1n|} <ls>BHA1VAPR.</ls> 1, 248. v. l. {#bAº#}. 
<p>{#AcaparAca#}; vgl. {#A£ ca pa£rA ca#} <ls>R2V.</ls> 10, 17, 6. 
<p>{#atiSka£d, atiSka£das#} 17, 4 ist Abl. Infin. zu {#skad#} [Page6-293-c] ²mit {#ati, atiSka£de#} <ls>R2V.</ls> 8, 67, 19 Dat. 


^<p>[0-9. ]*{#[^#]*#}[.,]? [a-zA-Züö]+[ .,]

========================================================
13208 vol7 
 1035 ^<p>[0-9. ]*{#[^#]*#} und {#[^#]*#}
 4459 ^<p>[0-9. ]*{#[^#]*#} [1-6]\.
 3824 ^<p>[0-9. ]*{#[^#]*#} [IV]+\.
 1640 ^<p>[0-9. ]*{#[^#]*#} [mfn]\.
 1168 ^<p>[0-9. ]*{#[^#]*#} \(Adj[.]\|Adv[.]\)
  256 ^<p>[0-9. ]*{#[^#]*#} mit
   67 ^<p>[0-9. ]*{#[^#]*#} [u]\.
  118 ^<p>[0-9. ]*{#[^#]*#} {%
   27 ^<p>[0-9. ]*{#[^#]*#} \(Nom[.]\|Denomin[.]\|Interj[.]\|Desid[.]\)
    7 ^<p>[0-9. ]*{#[^#]*#} und [0-9. ]*{#[^#]*#}
   35 ^<p>[0-9. ]*{#[^#]*#} und [0-9. ²]*{#[^#]*#}
   20 ^<p>[0-9. ]*{#[^#]*#} ²und [0-9. ]*{#[^#]*#}
  142 ^<p>[0-9. ]*{#[^#]*#},? \(lies\|auch\|so\|in\|s[.]\)
   32 ^<p>[0-9. ]*{#[^#]*#}, f[.] {#
   43 ^<p>[0-9. ]*{#[^#]*#},? \(Absol[.]\|Caus[.]\|Instr[.]\|Abl[.]\|Nom[.]\|Intens[.]\|Desid[.]\)
  124 ^<p>[0-9. ]*{#[^#]*#} (
   42 ^<p>[0-9. ]*{#[^#]*#} \(oder\|eher\|etwa\|zu\|vgl[.]\|nur\|v[.] l[.]\)
   44 ^<p>[0-9. ]*{#[^#]*#},? \([0-9]\|Loc[.]\)
   54 ^<p>[0-9. ]*{#[^#]*#} <ls>
   25 ^<p>[0-9. ]*{#[^#]*#}[.,;]? \(=\|[?]\|ist\|am\|woh\|steht\|Nomin[.]\)
   10 ^<p>[0-9. ]*{#[^#]*#}[.,;]? \(Z[.]\|Partic[.]\|Infin[.]\|als\|metrisch\)
   10 ^<p>[0-9. ]*{#[^#]*#}[.,;]? \(N[.]\|st[.]\|das\|vgl[.]\|²<ls>\|oben\)
    6 ^<p>[0-9. ]*{#[^#]*#}[.,;]? \([*]Mit\|Pass[.]\|ebend\|nach\|Intens[.]\)
    6 ^<p>[0-9. ]*{#[^#]*#}[.,;]? \(Caus[.]\|onomatop[.]\|[*]zu\|Titel\|im\)
 and 14 more:
<p>{#AdyantasthAyika#} 
<p>{#kuzUla#} schlechte Schreibart für ²{#kusUla#}. 
<p>{#*kaivartimustaka = kaivartImustaka#}. 
<p>{#khaza#} häufige Schreibart für {#khasa. ²ºbhASya#} n. <ls>SUBHA1SHITA1V.</ls> 3175. 
<p>{#grahArcanaprokSaNa, grahArcanavidhi#} und 
<p>{#dhanadAy, ºyate#} {|Kubera|} {%gleichkom-²men%} <ls>JA1TAKAM.</ls> 5. 
<p>{#dhavalapurANasamuccaya#} fehlerhaft für ²{#sakalapurANaº#}. 
<p>{#paJcAvatta£#} fgg. IV. 4. 
<p>{#pATalopala#} IV, 5. 
<p>{#puruSa#}, und {#ºka#} IV. 5. 
<p>{#pra£tyekarUpa#} scheinbar <ls>MAITR. S.</ls> 3, ²3, 9 (42, 6), da nach <ls>DELBRÜCK</ls> {#pra£tye£-²karUpAH#} zu betonen ist {%(in Bezug auf ²die Milch gleichfarbig).%} 
<p>{#*buddhakAyavarNapariniSpattyabhinirhArA#} ²f. {%eine best.%} {|Dha1ran2i1|} <ls>MAHA1VY.</ls> 25, 12. 
<p>{#varta#} und v. l. {#varti#} VI. = {#mUtrabila#} ²<ls>DA1RILA</ls> zu <ls>KAUS4.</ls> 25, 16. 
<p>3. und 4. {#vyay#} mit *zu versehen. 



========================================================================
list all instances of Devanagari text, tak
python wide.py temp_pwkvn_15.txt wide_15.txt 
22569 lines read from temp_pwkvn_15.txt
589 wide text written to wide_15.txt

New version, start with version 15
cp temp_pwkvn_15.txt temp_pwkvn_16.txt

python wide.py temp_pwkvn_16.txt wide_16.txt 
22569 lines read from temp_pwkvn_16.txt
518 wide text written to wide_16.txt

========================================================================
use transcoder.py from ../lsprep3

slp1_hk.xml
(originally from github repository funderburkjim/sanskrit-transcoding
cp cp /c/xampp/htdocs/cologne/csl-websanlexicon/v02/makotemplates/web/utilities/transcoder/slp1_hk.xml .

Modifications:
HK = SLP1
£ = /  (udatta accent)
_ = \  (anudatta)
¹ = ^  (svarita)
Lh = |

python ../lsprep3/traninvert.py slp1_hk.xml hk_slp1.xml

new version temp_pwkvn_17.txt, manually adjusted from version 16.

| wrongly for ¹ (5 or so changes)
8 cases where '.' is in {#X#}.  These are punctuation and moved out of {#X#}
========================================================================
python ../lsprep3/traninvert.py slp1_hk.xml hk_slp1.xml
========================================================================
python transcode.py hk,slp1 temp_pwkvn_17.txt temp_pwkvn_17_slp1.txt

# check invertibility
python transcode.py slp1,hk temp_pwkvn_17_slp1.txt temp.txt
diff temp_pwkvn_17.txt temp.txt | wc -l
 (0:  as expected no difference)
========================================================================
Examine the characters in Devanagari 

python deva_chars.py temp_pwkvn_17.txt deva_chars_hk.txt

python deva_chars.py temp_pwkvn_17_slp1.txt deva_chars_slp1.txt

# check invertibility
python as_roman.py roman,as temp_wide_16_iast.txt temp.txt
diff wide_16.txt  temp.txt
 ## no difference, as expected
 rm temp.txt

========================================================================
headword markup
Add <hw>X</hw> markup
Initial markup (also adds pc attribute to <p>
python init_hw.py temp_pwkvn_17.txt temp_pwkvn_18.txt init_hw.txt


<p n="NNNNN" pc="7-374-a"><hw>X</hw>
It is problematic whether the scope of <hw>X</hw> is correct.
init_hw.txt contains lines where the text following <hw>X</hw> is not
not recognized. 
And the following table identifies the different types of following text
is recognized, along with the frequencies observed.
This table is not currently used elsewhere.
5387 "</hw> [0-9]+[.]"
4016 "</hw> [IV]+[.]"
 360 "</hw>,? <ls>"
4628 "</hw>,? [*]?[mfn][.]"
4649 "</hw> (Adj|Adv|)[.]"
 806 "</hw> [0-9]+[)]"
 281 "</hw>,? {%"
1007 "</hw>[.,;]? (mit|auch|nach|oder|als|lies) "
 219 "</hw>,? (Nom|Gen|Absol|Loc|Dat|Acc)[.]"
 390 "</hw>,? [(]"
  24 "</hw>,? (Pl|Sg|Du|Perf|Abl|Comm|Bez)[.]"
 229 "</hw>[.,;]? [*]?(Partic|vgl|Z|Nachtr|N|S|Caus|s|Desid|Instr)[.]"
 233 "</hw>,? (so|wohl|ist|nicht|in|am|vor) "
  65 "</hw>,? (im|eher|füge|streiche|zu|das) "
  23 "</hw>,? (etwa|Titel|genauer) "
  23 "</hw>,? (soll|v[.] l[.]|angeblich|wegen|=|für|über) "
  25 "</hw>,? (die|führt|der|st[.]|ebend[.]|steht) "
   9 "</hw>[,;]? (Compar[.]|vgl[.]|Accent|dass[.]|auf) "
  13 "</hw>[.,;]? (Nomin[.]|Intens[.]|Pass[.]|Denomin[.]|Interj[.]|Infin[.]) "
  10 "</hw>[.,;]? (oben|häufige|scheinbar|metrisch) "
  23 "</hw>[.,;]? (von|bedeutet|wird|bei|Cit[.]|wann|fehlerhaft|besser) "
   7 "</hw>[.,;]? (vielleicht|richtig|Partikel|Anderes|anders|) "
   7 "</hw>[.,;]? (Partikel,|Voc[.]|an|wohlauch|Beiw[.]|wiederholt|bisweilen) "
  10 "</hw>[.,;]? (Med[.]|statt|könnte|kann|fgg[.]|scheint|eine) "
  12 "</hw>[.,;]? ({[|]|\[Page|adj[.] |Name |richtig[.] |liesse |gedr[.] )"
   8 "</hw>[.,;]? ([?] <ls>|werden |sind \[0-9]+[)] |u[.] s[.] w[.] )"
   8 "</hw>[.,;]? (definirt |und am |{#jAgAra#}|²[fn][.] |sind |17, 4 |andere |onomatop[.])"
   6 "</hw>[.,;]? (umzu-²stellen|3, lies |3, 4. \[Page7|5 fehlerhaft |5 zu streichen)"
   7 "</hw>[.,;]? (²\(vgl.|81, 1. 5|²<ls>|1 \(steht|[*]Mit |schlechte |stehen )"
   3 "</hw>[.,;]? (um-²zustellen|[*]zu |nur )"
   6 "</hw>[.,;]? (5 unter|²IV|IV, |häufig |u\. {%Aushauch%}|viel-²leicht)"
   3 "</hw>[.,;]? ([?] ebend.|1ste |2\) zu )"
   3 "</hw>[.,;]? (²I|umzustellen)"   
  43 "</hw>[.] $"


 15   written to init_hw.txt

These to be adjusted manually.
[Note: these have been resolved in version 20]
========================================================================
temp_pwkvn_19.txt  manual adjustment from temp_pwkvn_18.txt
 python ../diff_to_changes.py temp_pwkvn_18.txt temp_pwkvn_19.txt change_19.txt
123 changes written to change_19.txt

example:
OLD:
<hw>2. {#aº, asvaptum#}</hw>
NEW:
<hom>2.</hom> <hw>{#aº#}</hw>, <hw>{#asvaptum#}</hw>
python multi_hw.py temp_pwkvn_19.txt change_20.txt
2273 changes written to change_20.txt

python ../updateByLine.py temp_pwkvn_19.txt change_20.txt temp_pwkvn_20.txt

One line has no hw:
<p n="16981" pc="7-339-c">TYPO.  grahASTaka part of preceding

========================================================================
python transcode.py hk,slp1 temp_pwkvn_20.txt temp_pwkvn_20_slp1.txt
check invertibility:
python transcode.py slp1,hk temp_pwkvn_20_slp1.txt temp.txt
diff temp_pwkvn_20.txt temp.txt | wc -l
 [0 invertibility verified]


========================================================================
Transfer version 17-20 to orig

transfer temp_pwkvn_17.txt to orig in cp1252 encoding
python ../utf8_cp1252.py temp_pwkvn_17.txt ../../orig/pwk1-7VN_ansi_17.txt

python ../utf8_cp1252.py temp_pwkvn_18.txt ../../orig/pwk1-7VN_ansi_18.txt

python ../utf8_cp1252.py temp_pwkvn_19.txt ../../orig/pwk1-7VN_ansi_19.txt

python ../utf8_cp1252.py temp_pwkvn_20.txt ../../orig/pwk1-7VN_ansi_20.txt
check invertibility
 python ../cp1252_utf8.py ../../orig/pwk1-7VN_ansi_20.txt temp.txt
 diff temp_pwkvn_20.txt temp.txt
========================================================================


